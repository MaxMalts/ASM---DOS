Turbo Assembler	 Version 4.1	    02/25/20 18:04:01	    Page 1
border_1.asm



      1				     locals @@
      2
      3	0000			     .model tiny
      4	0000			     .code
      5				     org 100H
      6
      7	0100			     Start:
      8	0100  E8 000F			     call Draw_Border
      9
     10	0103  8C D8			     mov ax, ds
     11	0105  8E C0			     mov es, ax
     12	0107  BF 0007r			     mov di, offset Message
     13	010A  E8 0099			     call Draw_message
     14
     15	010D  B8 4C00			     mov ax, 4c00H
     16	0110  CD 21			     int 21H
     17
     18	0112				     Draw_Border proc
     19	      =00C9				     topLeftChar     equ 'É'
     20	      =00CD				     topChar	     equ 'Í'
     21	      =00BB				     topRightChar    equ '»'
     22	      =00BA				     rightChar	     equ 'º'
     23	      =00BC				     bottomRightChar equ '¼'
     24	      =00CD				     bottomChar	     equ 'Í'
     25	      =00C8				     bottomLeftChar  equ 'È'
     26	      =00BA				     leftChar	     equ 'º'
     27	      =0020				     innerChar	     equ ' '
     28	      =0060				     charColor	     equ 01100000B
     29
     30	0112  B8 B800				     mov ax, 0b800H
     31	0115  8E C0				     mov es, ax
     32
     33	0117  8A 3E 0001r			     mov bh, bordTopY	 ; Current y axis
     34
     35
     36	011B  8A C7				     mov al, bh	     ; Calculating top left corner position
     37	011D  F6 26 0004r			     mul screenWidth
     38	0121  B6 00				     mov dh, 0
     39	0123  8A 16 0000r			     mov dl, bordLeftX
     40	0127  03 C2				     add ax, dx
     41	0129  03 C0				     add ax, ax
     42	012B  8B F8				     mov di, ax
     43
     44	012D  B4 60				     mov ah, charColor	     ; Drawing top line
     45	012F  B0 C9				     mov al, topLeftChar
     46	0131  AB				     stosw
     47	0132  B0 CD				     mov al, topChar
     48	0134  B5 00				     mov ch, 0
     49	0136  8A 0E 0002r			     mov cl, bordRightX
     50	013A  2A 0E 0000r			     sub cl, bordLeftX
     51	013E  FE C9				     dec cl
     52	0140  F3> AB				     rep stosw
     53	0142  B0 BB				     mov al, topRightChar
     54	0144  AB				     stosw
     55	0145  FE C7				     inc bh
     56
     57	0147					     @@Middle_loop:
Turbo Assembler	 Version 4.1	    02/25/20 18:04:01	    Page 2
border_1.asm



     58	0147  8A C7					     mov al, bh	     ; Calculating current position
     59	0149  F6 26 0004r				     mul screenWidth
     60	014D  B6 00					     mov dh, 0
     61	014F  8A 16 0000r				     mov dl, bordLeftX
     62	0153  03 C2					     add ax, dx
     63	0155  03 C0					     add ax, ax
     64	0157  8B F8					     mov di, ax
     65
     66	0159  B4 60					     mov ah, charColor	     ; Drawing current line
     67	015B  B0 BA					     mov al, leftChar
     68	015D  AB					     stosw
     69	015E  B0 20					     mov al, innerChar
     70	0160  B5 00					     mov ch, 0
     71	0162  8A 0E 0002r				     mov cl, bordRightX
     72	0166  2A 0E 0000r				     sub cl, bordLeftX
     73	016A  FE C9					     dec cl
     74	016C  F3> AB					     rep stosw
     75	016E  B0 BA					     mov al, rightChar
     76	0170  AB					     stosw
     77	0171  FE C7					     inc bh
     78
     79	0173  3A 3E 0003r				     cmp bh, bordBottomY
     80	0177  E0 CE					     loopne @@Middle_loop
     81
     82	0179  8A C7				     mov al, bh	     ; Calculating bottom left corner position
     83	017B  F6 26 0004r			     mul screenWidth
     84	017F  B6 00				     mov dh, 0
     85	0181  8A 16 0000r			     mov dl, bordLeftX
     86	0185  03 C2				     add ax, dx
     87	0187  03 C0				     add ax, ax
     88	0189  8B F8				     mov di, ax
     89
     90	018B  B4 60				     mov ah, charColor	     ; Drawing bottom line
     91	018D  B0 C8				     mov al, bottomLeftChar
     92	018F  AB				     stosw
     93	0190  B0 CD				     mov al, bottomChar
     94	0192  B5 00				     mov ch, 0
     95	0194  8A 0E 0002r			     mov cl, bordRightX
     96	0198  2A 0E 0000r			     sub cl, bordLeftX
     97	019C  FE C9				     dec cl
     98	019E  F3> AB				     rep stosw
     99	01A0  B0 BC				     mov al, bottomRightChar
    100	01A2  AB				     stosw
    101	01A3  FE C7				     inc bh
    102
    103	01A5  C3				     ret
    104	01A6					     Draw_border endp
    105
    106	01A6				     Draw_message proc
    107	      =0060				     msgColor	     equ 01100000B
    108
    109	01A6  8B DF				     mov bx, di	     ; Saving message address
    110
    111	01A8  B0 24				     mov al, '$'
    112	01AA  B9 FFFF				     mov cx, 0ffffH
    113	01AD  F2> AE				     repne scasb
    114
Turbo Assembler	 Version 4.1	    02/25/20 18:04:01	    Page 3
border_1.asm



    115	01AF  B8 B800				     mov ax, 0b800H
    116	01B2  8E C0				     mov es, ax
    117
    118	01B4  8B CF				     mov cx, di	     ; Message length
    119	01B6  2B CB				     sub cx, bx
    120	01B8  49				     dec cx
    121	01B9  8B FB				     mov di, bx
    122
    123	01BB  B8 0000				     mov ax, 0
    124	01BE  A0 0006r				     mov al, msgY    ; Calculating screen position
    125	01C1  F6 26 0004r			     mul screenWidth
    126	01C5  B6 00				     mov dh, 0
    127	01C7  8A 16 0005r			     mov dl, msgX
    128	01CB  03 C2				     add ax, dx
    129	01CD  03 C0				     add ax, ax
    130	01CF  8B F8				     mov di, ax
    131
    132	01D1  B4 60				     mov ah, msgColor
    133	01D3					     @@Print_loop:
    134	01D3  8A 07					     mov al, [bx]
    135	01D5  AB					     stosw
    136	01D6  43					     inc bx
    137	01D7  E2 FA					     loop @@Print_loop
    138
    139	01D9  C3				     ret
    140	01DA					     Draw_message endp
    141
    142	01DA			     .data
    143	0000  1E			     bordLeftX db 30D
    144	0001  0C			     bordTopY db 12D
    145	0002  32			     bordRightX	db 50D
    146	0003  12			     bordBottomY db 18D
    147	0004  50			     screenWidth db 80D
    148
    149	0005  25			     msgX db 37D
    150	0006  0F			     msgY db 15D
    151	0007  48 65 6C 6C 6F 24		     Message db	'Hello$'
    152
    153				     end Start
Turbo Assembler	 Version 4.1	    02/25/20 18:04:01	    Page 4
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/25/20"
??FILENAME			  Text	 "border_1"
??TIME				  Text	 "18:04:01"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@MIDDLE_LOOP			  Near	 DGROUP:0147
@@PRINT_LOOP			  Near	 DGROUP:01D3
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _DATA
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 BORDER_1
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BORDBOTTOMY			  Byte	 DGROUP:0003
BORDLEFTX			  Byte	 DGROUP:0000
BORDRIGHTX			  Byte	 DGROUP:0002
BORDTOPY			  Byte	 DGROUP:0001
BOTTOMCHAR			  Number 00CD
BOTTOMLEFTCHAR			  Number 00C8
BOTTOMRIGHTCHAR			  Number 00BC
CHARCOLOR			  Number 0060
DRAW_BORDER			  Near	 DGROUP:0112
DRAW_MESSAGE			  Near	 DGROUP:01A6
INNERCHAR			  Number 0020
LEFTCHAR			  Number 00BA
MESSAGE				  Byte	 DGROUP:0007
MSGCOLOR			  Number 0060
MSGX				  Byte	 DGROUP:0005
MSGY				  Byte	 DGROUP:0006
RIGHTCHAR			  Number 00BA
SCREENWIDTH			  Byte	 DGROUP:0004
START				  Near	 DGROUP:0100
TOPCHAR				  Number 00CD
TOPLEFTCHAR			  Number 00C9
TOPRIGHTCHAR			  Number 00BB

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  000D Word	  Public  DATA
  _TEXT				  16  01DA Word	  Public  CODE
